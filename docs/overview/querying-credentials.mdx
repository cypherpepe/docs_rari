---
sidebar_label: Querying credentials
#TODO: rewrite
---

# Querying credentials (coming soon)

Applications can use Rarimo's cross-chain protocol to send queries to identity holders' wallets.
The wallet responds with a zero-knowledge proof (ZKP) that the credentials in the user's identity satisfy the query.

The application must determine which authorities it trusts to issue these credentials.

There are two basic types of request:

   - Basic authentication requests prompt the user to verify that they own a certain wallet.
   For example, this type of request can be part of a login process to allow the user access to an application.
   - Query-based requests prompt the user to provide a proof that they own a credential that satisfies the query.

## On-chain and off-chain verification

Applications can query credentials with a smart contract on a blockchain or with an application that is not on a chain.
The method that you use is up to you and depends in part on what you want to happen when the query succeeds or fails.

On-chain verification can be convenient when you want on-chain actions to happen as a result of the query.
In this flow, the verifier application uses a smart contract to store the query design, send queries to wallets, and verify the proofs that the wallets send.

Off-chain verification does not depend on as many blockchain transactions and can be convenient when the resulting actions happen in the real world or in a non-blockchain application.
Off-chain verification requires the querying application to send a request to the user's wallet and verify the proof using external APIs instead of sending blockchain transactions.

## Query process flow

Both ways of sending queries follow these general steps:

1. The verifier creates an application to send the request.
This application can be a smart contract that includes a design for the query request or an off-chain application.
1. The verifier smart contract or application sends a request to the user's wallet via a QR code or link.
1. The user uses their wallet to accept the request, such as unlocking the wallet, scanning the QR code, and authorizing the wallet to generate the proof.
1. The wallet retrieves the revocation status from the issuer.
1. The wallet generates the proof, which includes the revocation status.
1. The wallet sends the proof to the smart contract.
1. The verifier application or smart contract verifies the proof, including checking that the states of the credential issuer and user are valid and have not been revoked.
1. If the proof is valid, the application or smart contract runs its logic for a successful query.

<!-- TODO: How to set up an application to send queries to wallets via Rarimo. -->
